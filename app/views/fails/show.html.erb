<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    // init the FB JS SDK
    FB.init({
      appId      : '534777629886814', // App ID from the App Dashboard
      channelUrl : '//www.infinite-bastion-8143.herokuapp.com', // Channel File for x-domain communication
      status     : true, // check the login status upon init?
      cookie     : true, // set sessions cookies to allow your server to access the session?
      xfbml      : true  // parse XFBML tags on this page?
    });

    // Additional initialization code such as adding Event Listeners goes here

  };

  // Load the SDK's source Asynchronously
  // Note that the debug version is being actively developed and might 
  // contain some type checks that are overly strict. 
  // Please report such bugs using the bugs tool.
  (function(d, debug){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
     ref.parentNode.insertBefore(js, ref);
   }(document, /*debug*/ false));
</script>

<div class="row">
	<div class="span6 offset2">
		<div class="boxtwo">
			<p>
				<center>
				  <img src="https://s3.amazonaws.com/failboard/tack.png" id="tack" /><br /><br />
				  <strong><u><p style="font-size: 32px;"><%= @fail.fail_title %></p></u><strong><br />
				  <%= image_tag @fail.image %><br /><br />
				  <p style="font-size: 18px;"><%= @fail.description %></p>

			  	</center>
			</p>
			<center>
					<% if current_user == @fail.user %>
					<hr></hr>
					<table border="0" bordercolor="" style="background-color:" width="250px" cellpadding="3" cellspacing="3">
						<tr>
							<td><%= link_to 'Edit This Fail', edit_fail_path(@fail), class: "btn btn-small btn-warning" %></td>
							<td><%= link_to 'Delete This Fail', @fail, method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-small btn-danger" %></td>
						</tr>
					</table>
						<br /><br />
					<% end %>
						<% if current_user.voted?(@fail) == false %>
						<div class="pull-right"><%= link_to "LOL", up_vote_fail_url(@fail), :method => :post, class: "btn btn-small btn-primary" %></div>
						<% end %>

						<% if @fail.up_votes > 0 %>
							<center>
								<% if @fail.up_votes == 1 %>
									<p><%= @fail.up_votes %> Person has LOL'd at this #FAIL!</p>
									<% else %>
									<p><%= @fail.up_votes %> People have LOL'd at this #FAIL!</p>
								<% end %>
							</center>
						<% else %>
							<center>
								<p>Be first to LOL at this!</p>
							</center>
						<% end %>
					</div>
					<div class="span6">
						<center><%= link_to 'Go back to the #Failboard', fails_path, class: "btn btn-large btn-success" %></center>
					</div>
			</center>

		</div>

	</div>
	<br /><br />
	<div class="span6 offset2">
		<center><%= content_tag(:div, nil, :class => 'fb-comments', "data-href" => "#{request.protocol}#{request.host_with_port}#{request.fullpath}", "data-width" => '470', "data-num-posts" => "10"  ) %></center>
		</div>
		<div id="fb-root"></div>

	<script>(function(d, s, id) {
	  var js, fjs = d.getElementsByTagName(s)[0];
	  if (d.getElementById(id)) return;
	  js = d.createElement(s); js.id = id;
	  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=534777629886814";
	  fjs.parentNode.insertBefore(js, fjs);
	}(document, 'script', 'facebook-jssdk'));
	</script>	
</div>


